# content of test_sample.py
import ast

from mirror.github.graphql import clean_graphql_data


def test_should_return_cleaned_data():
    assert clean_graphql_data(ast.literal_eval(DIRTY_GRAPHQL_DATA)) == CLEAN_GRAPHQL_DATA


DIRTY_GRAPHQL_DATA = """[{'cursor': 'Y3Vyc29yOjE=', 'node': {'id': 'MDEwOlJlcG9zaXRvcnkyMzM4NzIxNjM=', 'name': 'tobigs-13th', 'description': '[2020.01-2021.01] 투빅스 13기 우수코드 저장소입니다.', 'shortDescriptionHTML': '[2020.01-2021.01] 투빅스 13기 우수코드 저장소입니다.', 'primaryLanguage': {'name': 'Jupyter Notebook'}, 'languages': {'totalCount': 2, 'edges': [{'size': 24260672, 'node': {'name': 'Jupyter Notebook'}}, {'size': 489, 'node': {'name': 'Python'}}]}, 'stargazers': {'totalCount': 29}, 'forkCount': 14, 'updatedAt': '2021-11-01T16:46:42Z', 'createdAt': '2020-01-14T15:26:37Z'}}, {'cursor': 'Y3Vyc29yOjI=', 'node': {'id': 'MDEwOlJlcG9zaXRvcnkzNzI3OTQyMzg=', 'name': '2021-06-01-simulazione', 'description': "Simulazione d'esame del 01/06/2021", 'shortDescriptionHTML': "Simulazione d'esame del 01/06/2021", 'primaryLanguage': {'name': 'Java'}, 'languages': {'totalCount': 2, 'edges': [{'size': 7360, 'node': {'name': 'Java'}}, {'size': 78, 'node': {'name': 'CSS'}}]}, 'stargazers': {'totalCount': 0}, 'forkCount': 96, 'updatedAt': '2021-06-01T10:45:19Z', 'createdAt': '2021-06-01T10:45:15Z'}}, {'cursor': 'Y3Vyc29yOjM=', 'node': {'id': 'MDEwOlJlcG9zaXRvcnkxMTMyMTI2NjE=', 'name': 'X-HOOK-For-CSGO', 'description': 'Aimtux for Windows. Updated 01/08/2021', 'shortDescriptionHTML': 'Aimtux for Windows. Updated 01/08/2021', 'primaryLanguage': {'name': 'C++'}, 'languages': {'totalCount': 7, 'edges': [{'size': 8808256, 'node': {'name': 'C++'}}, {'size': 2865259, 'node': {'name': 'C'}}, {'size': 558104, 'node': {'name': 'C#'}}, {'size': 30881, 'node': {'name': 'Objective-C++'}}, {'size': 5634, 'node': {'name': 'Shell'}}, {'size': 2183, 'node': {'name': 'Objective-C'}}, {'size': 310, 'node': {'name': 'Batchfile'}}]}, 'stargazers': {'totalCount': 41}, 'forkCount': 18, 'updatedAt': '2022-03-10T18:44:52Z', 'createdAt': '2017-12-05T17:29:31Z'}}, {'cursor': 'Y3Vyc29yOjQ=', 'node': {'id': 'MDEwOlJlcG9zaXRvcnkzMjk2OTIzMTQ=', 'name': 'solana-escrow', 'description': 'Reference Implementation for the guide https://paulx.dev/blog/2021/01/14/programming-on-solana-an-introduction/', 'shortDescriptionHTML': 'Reference Implementation for the guide https://paulx.dev/blog/2021/01/14/programming-on-solana-an-introduction/', 'primaryLanguage': {'name': 'TypeScript'}, 'languages': {'totalCount': 3, 'edges': [{'size': 15680, 'node': {'name': 'TypeScript'}}, {'size': 14175, 'node': {'name': 'Rust'}}, {'size': 2335, 'node': {'name': 'Shell'}}]}, 'stargazers': {'totalCount': 223}, 'forkCount': 124, 'updatedAt': '2022-03-03T19:50:19Z', 'createdAt': '2021-01-14T17:50:40Z'}}, {'cursor': 'Y3Vyc29yOjU=', 'node': {'id': 'R_kgDOGJFaWg', 'name': 'Hacktoberfest-2021-01', 'description': "Hacktoberfest-2021 beginners' 01", 'shortDescriptionHTML': "Hacktoberfest-2021 beginners' 01", 'primaryLanguage': {'name': 'JavaScript'}, 'languages': {'totalCount': 3, 'edges': [{'size': 2676, 'node': {'name': 'JavaScript'}}, {'size': 996, 'node': {'name': 'HTML'}}, {'size': 146, 'node': {'name': 'Smalltalk'}}]}, 'stargazers': {'totalCount': 0}, 'forkCount': 25, 'updatedAt': '2021-10-31T11:42:14Z', 'createdAt': '2021-09-30T18:28:25Z'}}]"""
CLEAN_GRAPHQL_DATA = """[{'id': 'MDEwOlJlcG9zaXRvcnkyMzM4NzIxNjM=', 'name': 'tobigs-13th', 'description': '[2020.01-2021.01] 투빅스 13기 우수코드 저장소입니다.', 'shortDescriptionHTML': '[2020.01-2021.01] 투빅스 13기 우수코드 저장소입니다.', 'primaryLanguage': 'Jupyter Notebook', 'languages': {'Jupyter Notebook': 24260672, 'Python': 489}, 'stargazers': 29, 'forkCount': 14, 'updatedAt': '2021-11-01T16:46:42Z', 'createdAt': '2020-01-14T15:26:37Z', 'cursor': 'Y3Vyc29yOjE='}, {'id': 'MDEwOlJlcG9zaXRvcnkzNzI3OTQyMzg=', 'name': '2021-06-01-simulazione', 'description': "Simulazione d'esame del 01/06/2021", 'shortDescriptionHTML': "Simulazione d'esame del 01/06/2021", 'primaryLanguage': 'Java', 'languages': {'Java': 7360, 'CSS': 78}, 'stargazers': 0, 'forkCount': 96, 'updatedAt': '2021-06-01T10:45:19Z', 'createdAt': '2021-06-01T10:45:15Z', 'cursor': 'Y3Vyc29yOjI='}, {'id': 'MDEwOlJlcG9zaXRvcnkxMTMyMTI2NjE=', 'name': 'X-HOOK-For-CSGO', 'description': 'Aimtux for Windows. Updated 01/08/2021', 'shortDescriptionHTML': 'Aimtux for Windows. Updated 01/08/2021', 'primaryLanguage': 'C++', 'languages': {'C++': 8808256, 'C': 2865259, 'C#': 558104, 'Objective-C++': 30881, 'Shell': 5634, 'Objective-C': 2183, 'Batchfile': 310}, 'stargazers': 41, 'forkCount': 18, 'updatedAt': '2022-03-10T18:44:52Z', 'createdAt': '2017-12-05T17:29:31Z', 'cursor': 'Y3Vyc29yOjM='}, {'id': 'MDEwOlJlcG9zaXRvcnkzMjk2OTIzMTQ=', 'name': 'solana-escrow', 'description': 'Reference Implementation for the guide https://paulx.dev/blog/2021/01/14/programming-on-solana-an-introduction/', 'shortDescriptionHTML': 'Reference Implementation for the guide https://paulx.dev/blog/2021/01/14/programming-on-solana-an-introduction/', 'primaryLanguage': 'TypeScript', 'languages': {'TypeScript': 15680, 'Rust': 14175, 'Shell': 2335}, 'stargazers': 223, 'forkCount': 124, 'updatedAt': '2022-03-03T19:50:19Z', 'createdAt': '2021-01-14T17:50:40Z', 'cursor': 'Y3Vyc29yOjQ='}, {'id': 'R_kgDOGJFaWg', 'name': 'Hacktoberfest-2021-01', 'description': "Hacktoberfest-2021 beginners' 01", 'shortDescriptionHTML': "Hacktoberfest-2021 beginners' 01", 'primaryLanguage': 'JavaScript', 'languages': {'JavaScript': 2676, 'HTML': 996, 'Smalltalk': 146}, 'stargazers': 0, 'forkCount': 25, 'updatedAt': '2021-10-31T11:42:14Z', 'createdAt': '2021-09-30T18:28:25Z', 'cursor': 'Y3Vyc29yOjU='}]"""
